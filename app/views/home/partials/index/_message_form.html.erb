<!-- Message Input Form -->
<div class="bg-white border border-gray-200 rounded-2xl shadow-lg p-8 mb-8">
  <%= form_with url: analyze_path, method: :post, local: false,
        class: "space-y-6",
        data: {
          sobri_target: "form",
          turbo_frame: "_top",
          action: "turbo:submit-end->sobri#handleSubmitEnd"
        } do |form| %>
    <div>
      <label for="message" class="block text-lg font-semibold text-gray-900 mb-3">
        What do you want to send?
      </label>
      <%= form.text_area :message,
            value: @original_message,
            placeholder: "Type your message here...

Tip: Use Cmd+Enter (Mac) or Ctrl+Enter (PC) to quickly analyze",
            rows: 6,
            class: "w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none text-lg leading-relaxed transition-all duration-200",
            required: true,
            data: {
              sobri_target: "messageInput",
              action: "input->sobri#updateButtonStates input->sobri#autoResize keydown->sobri#handleKeydown"
            } %>
    </div>

    <div class="flex flex-col sm:flex-row gap-4">
      <div id="analyze-button" data-sobri-target="submitButton">
        <%= render "home/partials/shared/analyze_button" %>
      </div>
      <button type="button"
              class="px-6 py-4 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"
              data-action="click->sobri#clear"
              data-sobri-target="clearButton">
        Clear
      </button>
    </div>

    <!-- Keyboard shortcuts hint -->
    <div class="text-sm text-gray-500 text-center">
      <span class="inline-flex items-center space-x-1">
        <kbd class="px-2 py-1 bg-gray-100 border border-gray-200 rounded text-xs">âŒ˜</kbd>
        <span>+</span>
        <kbd class="px-2 py-1 bg-gray-100 border border-gray-200 rounded text-xs">Enter</kbd>
        <span class="ml-2">to analyze quickly</span>
      </span>
    </div>
  <% end %>
</div>
